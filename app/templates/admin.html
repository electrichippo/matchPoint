{% extends "base.html" %}

{% block content %}
<style>
    h1, h2 {
        color: #333;
        text-align: center;
        margin-bottom: 1rem;
    }

    h2 {
        margin-top: 2rem;
    }

    form {
        background-color: #f9f9f9;
        padding: 1.5rem;
        border-radius: 8px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.05);
        margin-bottom: 2rem;
    }

    .prediction-group {
        margin-bottom: 1.5rem;
    }

    .prediction-group p {
        font-weight: bold;
        color: #555;
        margin-bottom: 0.5rem;
    }

    .option-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr); /* Creates two equal columns */
        gap: 0.5rem; /* Spacing between grid items */
    }

    .option-tile {
        border: 1px solid #ccc;
        border-radius: 5px;
        cursor: pointer;
        transition: background-color 0.3s ease, border-color 0.3s ease;
        text-align: center; /* Center the label text */
        overflow: hidden; /* To contain the label if needed */
        padding: 0; /* Remove padding from the tile itself */
    }

    .option-tile label {
        display: block; /* Make the label fill the tile */
        padding: 0.8rem; /* Add padding to the label */
        margin: 0;
        cursor: pointer;
        color: #333;
    }

    .option-tile input[type="radio"] {
        display: none; /* Hide the actual radio button */
    }

    .option-tile input[type="radio"]:checked + label {
        background-color: #DCEDC8; /* Light blue shading for selection */
        border-color: #DCEDC8; /* Slightly darker blue for the border */
        color: #333; /* Keep the text color consistent */
    }

    .option-tile:hover {
        background-color: #eee;
        border-color: #999;
    }

    button[type="submit"] {
        background-color: #5cb85c;
        color: white;
        padding: 0.8rem 1.5rem;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-size: 1rem;
        transition: background-color 0.3s ease;
    }

    button[type="submit"]:hover {
        background-color: #4cae4c;
    }

    table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 1rem;
        background-color: white;
        box-shadow: 0 0 5px rgba(0, 0, 0, 0.05);
        border-radius: 5px;
        overflow: hidden;
    }

    th, td {
        padding: 0.8rem 1.2rem;
        text-align: left;
        border-bottom: 1px solid #eee;
    }

    th {
        background-color: #f0f0f0;
        font-weight: bold;
    }

    tr:hover {
        background-color: #f5f5f5;
    }

    hr {
        border: none;
        border-top: 1px solid #ddd;
        margin: 1rem 0;
    }
</style>

<h1>ADMIN</h1>
{% if radio_groups %}
<h1>Pick Winner</h1>
    <form method="POST">
        {% for group in radio_groups %}
            <div class="prediction-group">
                <p>{{ group.label }}</p>
                <div class="option-grid">
                    {% for value, display_label in group.options %}
                        <div class="option-tile">
                            <input type="radio" id="{{ group.name }}_{{ value }}" name="{{ group.name }}" value="{{ value }}">
                            <label for="{{ group.name }}_{{ value }}">{{ display_label }}</label>
                        </div>
                    {% endfor %}
                </div>
            </div>
            <hr>
        {% endfor %}
        <p></p>
        <button type="submit">Submit</button>
    </form>

{% endif %}

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const optionTiles = document.querySelectorAll('.option-tile');

        optionTiles.forEach(tile => {
            tile.addEventListener('click', function() {
                const radio = this.querySelector('input[type="radio"]');
                if (radio) {
                    radio.checked = true;
                    // Trigger the change event to update the styling
                    radio.dispatchEvent(new Event('change'));
                }
            });
        });

        const radioButtons = document.querySelectorAll('input[type="radio"]');
        radioButtons.forEach(radio => {
            radio.addEventListener('change', function() {
                // Remove 'selected' class from all option tiles in the same group
                const parentGrid = this.closest('.option-grid');
                if (parentGrid) {
                    const optionTiles = parentGrid.querySelectorAll('.option-tile');
                    optionTiles.forEach(tile => tile.classList.remove('selected'));

                    // Add 'selected' class to the parent option tile of the selected radio button
                    const parentTile = this.closest('.option-tile');
                    if (parentTile) {
                        parentTile.classList.add('selected');
                    }
                }
            });
        });
    });
</script>

{% endblock %}